---
title: AIGC å¯¹è¯ç»„ä»¶
description: è¿™æ˜¯ä¸€æ¬¾æ”¯æŒAIGCå¯¹è¯çš„ç»„ä»¶ï¼Œæ”¯æŒSSEæµå¼è¾“å‡ºå¯¹è¯ï¼Œæ”¯æŒmarkdown æ ¼å¼è¾“å‡ºæ¸²æŸ“ï¼Œå¦‚ä»£ç å—ã€latexå…¬å¼ã€è¡¨æ ¼ã€å›¾ç‰‡åŠè§†é¢‘ç­‰ã€‚
---

### è¿™æ˜¯ä¸€æ¬¾ AIGC å¯¹è¯ç»„ä»¶
##### ğŸ¨ æ”¯æŒæµå¼å¯¹è¯è¾“å‡ºï¼Œå¼€ç®±å³ç”¨ï¼Œæ”¯æŒinternLM åŠ lmdeploy apiï¼Œä¹Ÿæ”¯æŒè‡ªå®šä¹‰api

##### ğŸ˜€ æ”¯æŒ md æ ¼å¼ä»£ç å—ã€latex å…¬å¼ã€è¡¨æ ¼ã€å›¾ç‰‡åŠè§†é¢‘æ¸²æŸ“

##### ğŸ˜ æ”¯æŒçº¦å®šæ ¼å¼çš„æ’ä»¶æ¸²æŸ“
	 
##### ğŸ‘»æ”¯æŒæµå¼å¯¹è¯å®‰å…¨å®¡æ ¸
	 

##### ğŸ˜ æä¾›æ ·å¼è‡ªå®šä¹‰æ¥å£

## Chatbox èŒƒä¾‹åŠ live ä»£ç å±•ç¤ºå¦‚ä¸‹ï¼š

### å¯¹æ¥ delployLM reset api è¿›è¡Œæµå¼è¾“å‡ºï¼Œdemo å¦‚ä¸‹ï¼š

````jsx live=true
// import ChatWebkit from 'chat-webkit'
function App() {
  const ref = useRef();
  const sessionList = [
    {
      id: "2",
      message:
        "ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„å¿«é€Ÿæ’åºï¼ˆQuickSortï¼‰çš„ Python ä»£ç å®ç°ï¼š\n```python\ndef quick_sort(arr):\n   if len(arr) <= 1:\n       return arr\n   else:\n       pivot = arr[0]\n       left = []\n       right = []\n       for i in range(1, len(arr)):\n           if arr[i] < pivot:\n               left.append(arr[i])\n           else:\n               right.append(arr[i])\n       return quick_sort(left) + [pivot] + quick_sort(right)\n```\nè¿™æ®µä»£ç ä½¿ç”¨äº†é€’å½’çš„æ–¹å¼å®ç°å¿«é€Ÿæ’åºã€‚åœ¨æ¯ä¸€æ¬¡é€’å½’ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†å€¼ï¼ˆpivotï¼‰ï¼Œç„¶åå°†æ•°ç»„ä¸­æ‰€æœ‰å°äºåŸºå‡†å€¼çš„å…ƒç´ æ”¾åˆ°ä¸€ä¸ªæ–°çš„å·¦å­æ•°ç»„ä¸­ï¼Œå°†æ‰€æœ‰å¤§äºç­‰äºåŸºå‡†å€¼çš„å…ƒç´ æ”¾åˆ°ä¸€ä¸ªæ–°çš„å³å­æ•°ç»„ä¸­ã€‚æœ€åï¼Œæˆ‘ä»¬å°†å·¦å­æ•°ç»„ã€åŸºå‡†å€¼å’Œå³å­æ•°ç»„æ‹¼æ¥èµ·æ¥å¹¶è¿”å›ã€‚",
      status: 0,
      question: "å¸®æˆ‘å†™ä¸€æ®µå¿«æ’ï¼Ÿ",
    },
  ];

  
  const startSse = () => {
    ref.current.startSse("ä½ å¥½ï¼ŒAIGCå¤§æ¨¡å‹ï¼Œä»Šå¤©æ˜¯æ˜ŸæœŸå‡ å•Šï¼Ÿ");
  };

  const stopSse = () => {
    ref.current.stopSse();
  };

  const reGenerate = () => {
    ref.current.reGenerate();
  };

  return (
    <>
      <div className="chatContainer">
        <ChatWebkit.ChatBox
           body={{
            prompt: "å†™ä¸€ä¸ª500å­—çš„å„¿ç«¥ç¡å‰æ•…äº‹",
            session_id: -1,
            interactive_mode: true,
            stream: true,
            request_output_len: 512,
            top_p: 0.8,
            top_k: 40,
            temperature: 0.8,
            repetition_penalty: 1,
            ignore_eos: false,
          }}
          apiType={2}
          propsSessionList={sessionList}
          url={"http://10.140.0.187:8080/v1/chat/interactive"}
          requestMessageContainerStyle={{ backgroundColor: "#CFBEFF" }}
          responseMessageContainerStyle={{
            backgroundColor: "rgba(39,45,230,.1)",
          }}
          ref={ref}
        />
        <Button
          style={{
            "background-color": "#4096ff",
            "margin-right": "5px",
            border: "0px",
            padding: "10px",
            "border-radius": "6px",
          }}
          onClick={startSse}
        >
          å¼€å§‹ä¼šè¯
        </Button>
        <Button
          style={{
            "background-color": "#4096ff",
            "margin-right": "5px",
            border: "0px",
            padding: "10px",
            "border-radius": "6px",
          }}
          onClick={stopSse}
        >
          åœæ­¢ä¼šè¯
        </Button>
        <Button
          style={{
            "background-color": "#4096ff",
            "margin-right": "5px",
            border: "0px",
            padding: "10px",
            "border-radius": "6px",
          }}
          onClick={reGenerate}
        >
          é‡è¯•
        </Button>
      </div>
    </>
  );
}
render(App);
````

### æ”¯æŒä»£ç å—ã€latex å…¬å¼åŠè¡¨æ ¼æ¸²æŸ“ï¼Œå¹¶é…ç½®å¤´åƒåŠè‡ªå®šä¹‰æ°”æ³¡æ ·å¼

````jsx live=true
// import ChatWebkit from 'chat-webkit'
function App() {
  const sessionList = [
    {
      id: "2",
      message:
        "ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„å¿«é€Ÿæ’åºï¼ˆQuickSortï¼‰çš„ Python ä»£ç å®ç°ï¼š\n```python\ndef quick_sort(arr):\n   if len(arr) <= 1:\n       return arr\n   else:\n       pivot = arr[0]\n       left = []\n       right = []\n       for i in range(1, len(arr)):\n           if arr[i] < pivot:\n               left.append(arr[i])\n           else:\n               right.append(arr[i])\n       return quick_sort(left) + [pivot] + quick_sort(right)\n```\nè¿™æ®µä»£ç ä½¿ç”¨äº†é€’å½’çš„æ–¹å¼å®ç°å¿«é€Ÿæ’åºã€‚åœ¨æ¯ä¸€æ¬¡é€’å½’ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†å€¼ï¼ˆpivotï¼‰ï¼Œç„¶åå°†æ•°ç»„ä¸­æ‰€æœ‰å°äºåŸºå‡†å€¼çš„å…ƒç´ æ”¾åˆ°ä¸€ä¸ªæ–°çš„å·¦å­æ•°ç»„ä¸­ï¼Œå°†æ‰€æœ‰å¤§äºç­‰äºåŸºå‡†å€¼çš„å…ƒç´ æ”¾åˆ°ä¸€ä¸ªæ–°çš„å³å­æ•°ç»„ä¸­ã€‚æœ€åï¼Œæˆ‘ä»¬å°†å·¦å­æ•°ç»„ã€åŸºå‡†å€¼å’Œå³å­æ•°ç»„æ‹¼æ¥èµ·æ¥å¹¶è¿”å›ã€‚",
      status: 0,
      question: "å¸®æˆ‘å†™ä¸€æ®µå¿«æ’ï¼Ÿ",
    },
    {
      id: "3",
      message:
        "å¾®ç§¯åˆ†æ˜¯æ•°å­¦ä¸­çš„ä¸€ä¸ªé‡è¦åˆ†æ”¯ï¼Œå®ƒç ”ç©¶çš„æ˜¯å‡½æ•°çš„å˜åŒ–ç‡å’Œç§¯åˆ†ã€‚ä»¥ä¸‹æ˜¯å¾®ç§¯åˆ†ä¸­ä¸€äº›å¸¸è§çš„æ¦‚å¿µå’Œå…¬å¼ï¼š\n\n1. å¯¼æ•°ï¼šå‡½æ•° $f(x)$ åœ¨ç‚¹ $x=a$ å¤„çš„å¯¼æ•°è¡¨ç¤ºä¸º $f'(a)$ æˆ– $\\frac{df}{dx}(a)$ï¼Œè¡¨ç¤ºå‡½æ•°åœ¨è¯¥ç‚¹çš„å˜åŒ–ç‡ã€‚å¯¼æ•°å¯ä»¥é€šè¿‡æé™å®šä¹‰æ±‚å¾—ï¼š\n$$f'(a)=\\lim_{h\\to 0}\\frac{f(a+h)-f(a)}{h}$$\n2. å¾®åˆ†ï¼šå‡½æ•° $f(x)$ åœ¨ç‚¹ $x=a$ å¤„çš„å¾®åˆ†è¡¨ç¤ºä¸º $df(a)$ï¼Œå®ƒæ˜¯ä¸€ä¸ªçº¿æ€§æ˜ å°„ï¼Œå¯ä»¥çœ‹ä½œæ˜¯å‡½æ•°åœ¨è¯¥ç‚¹çš„å±€éƒ¨çº¿æ€§è¿‘ä¼¼ã€‚å¾®åˆ†å¯ä»¥é€šè¿‡å¯¼æ•°å®šä¹‰ï¼š\n$$df(a)=\\lim_{h\\to 0} \\frac{f(a+h)-f(a)}{h}dh$$\n3. ä¸å®šç§¯åˆ†ï¼šå‡½æ•° $f(x)$ çš„ä¸å®šç§¯åˆ†è¡¨ç¤ºä¸º $\\int f(x)dx$ï¼Œè¡¨ç¤ºå‡½æ•°çš„ä¸€ä¸ªåŸå‡½æ•°ã€‚ä¸å®šç§¯åˆ†å¯ä»¥é€šè¿‡å¯¼æ•°æ±‚å¾—ï¼š\n$$\\int f(x)dx=F(x)+C$$\nå…¶ä¸­ $F(x)$ æ˜¯ $f(x)$ çš„ä¸€ä¸ªåŸå‡½æ•°ï¼Œ$C$ æ˜¯å¸¸æ•°ã€‚\n4. å®šç§¯åˆ†ï¼šå‡½æ•° $f(x)$ åœ¨åŒºé—´ $[a,b]$ ä¸Šçš„å®šç§¯åˆ†è¡¨ç¤ºä¸º $\\int_a^b f(x)dx$ï¼Œè¡¨ç¤ºå‡½æ•°åœ¨è¯¥åŒºé—´ä¸Šçš„é¢ç§¯ã€‚å®šç§¯åˆ†å¯ä»¥é€šè¿‡ä¸å®šç§¯åˆ†æ±‚å¾—ï¼š\n$$\\int_a^b f(x)dx=F(b)-F(a)$$\nå…¶ä¸­ $F(x)$ æ˜¯ $f(x)$ çš„ä¸€ä¸ªåŸå‡½æ•°ã€‚\n\nä»¥ä¸Šæ˜¯å¾®ç§¯åˆ†ä¸­çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µå’Œå…¬å¼ï¼Œå®ƒä»¬å¯ä»¥ç”¨ LaTeX å…¬å¼è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œå¯¼æ•°å¯ä»¥è¡¨ç¤ºä¸ºï¼š\n$$f'(a)=\\lim_{h\\to 0}\\frac{f(a+h)-f(a)}{h}$$\nä¸å®šç§¯åˆ†å¯ä»¥è¡¨ç¤ºä¸ºï¼š\n$$\\int f(x)dx=F(x)+C$$\nå®šç§¯åˆ†å¯ä»¥è¡¨ç¤ºä¸ºï¼š\n$$\\int_a^b f(x)dx=F(b)-F(a)$$\nå¸Œæœ›è¿™äº›å…¬å¼èƒ½å¤Ÿå¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å¾®ç§¯åˆ†çš„æ¦‚å¿µå’Œåº”ç”¨ã€‚",
      status: 0,
      question: "å¸®æˆ‘ç”¨latexå…¬å¼æè¿°å¾®ç§¯åˆ†?",
    },
    {
      id: "4",
      message:
        "ä»¥ä¸‹æ˜¯ä¸–ç•Œä¸Šåå¤§è‘—åé£æ™¯åŒºçš„åˆ—è¡¨ï¼š\n\n| æ’å | æ™¯ç‚¹åç§° | æ‰€åœ¨å›½å®¶ |\n| --- | --- | --- |\n| 1 | å¤§å³¡è°·å›½å®¶å…¬å›­ | ç¾å›½ |\n| 2 | ç­èŠ™å›½å®¶å…¬å›­ | åŠ æ‹¿å¤§ |\n| 3 | é›…å…¸å«åŸ | å¸Œè…Š |\n| 4 | å´å“¥çªŸ | æŸ¬åŸ”å¯¨ |\n| 5 | å¤§å³¡è°·å›½å®¶å…¬å›­ | å¦æ¡‘å°¼äºš |\n| 6 | ç½—é©¬æ–—å…½åœº | æ„å¤§åˆ© |\n| 7 | é•¿åŸ | ä¸­å›½ |\n| 8 | é›…å°”å¡”å®«æ®¿ | ä¹Œå…‹å…° |\n| 9 | å·¨çŸ³é˜µ | è‹±å›½ |\n| 10 | å¤§å ¡ç¤ | æ¾³å¤§åˆ©äºš |\n\nè¿™äº›æ™¯ç‚¹éƒ½æ˜¯ä¸–ç•Œè‘—åçš„æ—…æ¸¸èƒœåœ°ï¼Œå¸å¼•äº†æ— æ•°æ¸¸å®¢å‰æ¥å‚è§‚å’Œæ¢ç´¢ã€‚æ— è®ºæ˜¯è‡ªç„¶é£å…‰è¿˜æ˜¯äººæ–‡å†å²ï¼Œè¿™äº›æ™¯ç‚¹éƒ½æ‹¥æœ‰ç€ç‹¬ç‰¹çš„é­…åŠ›å’Œä»·å€¼ã€‚",
      question: "å¸®æˆ‘åˆ—å‡º10å¤§é£æ™¯åŒº",
    },
  ];

  return (
    <>
      <div className="chatContainer">
        <ChatWebkit.ChatBox
          userAvatar={<span>TEST USER</span>}
          modelAvatar={<span>LLM</span>}
          propsSessionList={sessionList}
          url=''
          apiType={1}
          requestMessageContainerStyle={{ backgroundColor: "#ffffff" }}
          responseMessageContainerStyle={{
            backgroundColor: "rgba(39,45,230,.1)",
          }}
        />
      </div>
    </>
  );
}
render(App);
````

### æ”¯æŒè‡ªå®šä¹‰å¯¹è¯æ¡†æ ·å¼

````jsx live=true
// import ChatWebkit from 'chat-webkit'
function App() {
  const sessionList = [
    {
      id: "2",
      message:
        "ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„å¿«é€Ÿæ’åºï¼ˆQuickSortï¼‰çš„ Python ä»£ç å®ç°ï¼š\n```python\ndef quick_sort(arr):\n   if len(arr) <= 1:\n       return arr\n   else:\n       pivot = arr[0]\n       left = []\n       right = []\n       for i in range(1, len(arr)):\n           if arr[i] < pivot:\n               left.append(arr[i])\n           else:\n               right.append(arr[i])\n       return quick_sort(left) + [pivot] + quick_sort(right)\n```\nè¿™æ®µä»£ç ä½¿ç”¨äº†é€’å½’çš„æ–¹å¼å®ç°å¿«é€Ÿæ’åºã€‚åœ¨æ¯ä¸€æ¬¡é€’å½’ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†å€¼ï¼ˆpivotï¼‰ï¼Œç„¶åå°†æ•°ç»„ä¸­æ‰€æœ‰å°äºåŸºå‡†å€¼çš„å…ƒç´ æ”¾åˆ°ä¸€ä¸ªæ–°çš„å·¦å­æ•°ç»„ä¸­ï¼Œå°†æ‰€æœ‰å¤§äºç­‰äºåŸºå‡†å€¼çš„å…ƒç´ æ”¾åˆ°ä¸€ä¸ªæ–°çš„å³å­æ•°ç»„ä¸­ã€‚æœ€åï¼Œæˆ‘ä»¬å°†å·¦å­æ•°ç»„ã€åŸºå‡†å€¼å’Œå³å­æ•°ç»„æ‹¼æ¥èµ·æ¥å¹¶è¿”å›ã€‚",
      status: 0,
      question: "å¸®æˆ‘å†™ä¸€æ®µå¿«æ’ï¼Ÿ",
    },
  ];

  return (
    <>
      <div className="chatContainer">
        <ChatWebkit.ChatBox
          userAvatar={<span>TEST USER</span>}
          modelAvatar={<span>LLM</span>}
          propsSessionList={sessionList}
          requestMessageContainerStyle={{ backgroundColor: "#ffffff" }}
          responseMessageContainerStyle={{
            backgroundColor: "rgba(39,45,230,.1)",
          }}
          url=''
          apiType={1}
          style={{ backgroundColor: "blue" }}
        />
      </div>
    </>
  );
}
render(App);
````

### é…ç½® SSE è¯·æ±‚åœ°å€ã€tokenï¼Œé€šè¿‡ ref æ–¹å¼æš´éœ²å‘èµ·ã€åœæ­¢ï¼Œé‡è¯• sse è¯·æ±‚åŠè·å– sse çŠ¶æ€æ¥å£ã€‚
#### è‹¥ä¸ºè‡ªå®šä¹‰æ¥å£ï¼Œæ•°æ®è¿”å›æ ¼å¼éœ€æ»¡è¶³ **è‡ªå®šä¹‰API SSEè¿”å›çš„æ•°æ®æ ¼å¼è¯´æ˜ï¼Œä¸”ä¸ºGET è¯·æ±‚**

````jsx live=true
// import ChatWebkit from 'chat-webkit'
const TooLongErrorComponent = () => {
  const tooLongErrorClick = () => {
    console.lopg("this chat is too long");
  };

  return <div onClick={tooLongErrorClick}>tooo lll</div>;
};

function App() {
  const ref = useRef();

  const sessionList = [
    {
      id: "2",
      message:
        "ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„å¿«é€Ÿæ’åºï¼ˆQuickSortï¼‰çš„ Python ä»£ç å®ç°ï¼š\n```python\ndef quick_sort(arr):\n   if len(arr) <= 1:\n       return arr\n   else:\n       pivot = arr[0]\n       left = []\n       right = []\n       for i in range(1, len(arr)):\n           if arr[i] < pivot:\n               left.append(arr[i])\n           else:\n               right.append(arr[i])\n       return quick_sort(left) + [pivot] + quick_sort(right)\n```\nè¿™æ®µä»£ç ä½¿ç”¨äº†é€’å½’çš„æ–¹å¼å®ç°å¿«é€Ÿæ’åºã€‚åœ¨æ¯ä¸€æ¬¡é€’å½’ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†å€¼ï¼ˆpivotï¼‰ï¼Œç„¶åå°†æ•°ç»„ä¸­æ‰€æœ‰å°äºåŸºå‡†å€¼çš„å…ƒç´ æ”¾åˆ°ä¸€ä¸ªæ–°çš„å·¦å­æ•°ç»„ä¸­ï¼Œå°†æ‰€æœ‰å¤§äºç­‰äºåŸºå‡†å€¼çš„å…ƒç´ æ”¾åˆ°ä¸€ä¸ªæ–°çš„å³å­æ•°ç»„ä¸­ã€‚æœ€åï¼Œæˆ‘ä»¬å°†å·¦å­æ•°ç»„ã€åŸºå‡†å€¼å’Œå³å­æ•°ç»„æ‹¼æ¥èµ·æ¥å¹¶è¿”å›ã€‚",
      status: 0,
      question: "å¸®æˆ‘å†™ä¸€æ®µå¿«æ’ï¼Ÿ",
    },
  ];

  const startSse = () => {
    ref.current.startSse("ä½ å¥½ï¼ŒAIGCå¤§æ¨¡å‹ï¼Œä»Šå¤©æ˜¯æ˜Ÿé™…å‡ å•Šï¼Ÿ");
  };

  const stopSse = () => {
    ref.current.stopSse();
  };

  const reGenerate = () => {
    ref.current.reGenerate();
  };

  const getSseStatus = () => {
    console.log(ref.current.getStatus());
  };

  return (
    <>
      <div className="chatContainer">
        <ChatWebkit.ChatBox
          userAvatar={<span>TEST USER</span>}
          modelAvatar={<span>LLM</span>}
          tooLongErrorComponent={TooLongErrorComponent()}
          eventName=""
          apiType={1}
          propsSessionList={sessionList}
          url={"{your api or internLM api}"}
          token={"this is sse header token"}
          requestMessageContainerStyle={{ backgroundColor: "#ffffff" }}
          responseMessageContainerStyle={{
            backgroundColor: "rgba(39,45,230,.1)",
          }}
          ref={ref}
        />
      </div>
      <Button
        style={{
          "background-color": "#4096ff",
          "margin-right": "5px",
          border: "0px",
          padding: "10px",
          "border-radius": "6px",
        }}
        onClick={startSse}
      >
        å¼€å§‹ä¼šè¯
      </Button>
      <Button
        style={{
          "background-color": "#4096ff",
          "margin-right": "5px",
          border: "0px",
          padding: "10px",
          "border-radius": "6px",
        }}
        onClick={stopSse}
      >
        åœæ­¢ä¼šè¯
      </Button>
      <Button
        style={{
          "background-color": "#4096ff",
          "margin-right": "5px",
          border: "0px",
          padding: "10px",
          "border-radius": "6px",
        }}
        onClick={reGenerate}
      >
        é‡è¯•
      </Button>
      <Button
        style={{
          "background-color": "#4096ff",
          "margin-right": "5px",
          border: "0px",
          padding: "10px",
          "border-radius": "6px",
        }}
        onClick={getSseStatus}
      >
        è·å–çŠ¶æ€
      </Button>
    </>
  );
}
render(App);
````

### æ’ä»¶æ˜¾ç¤ºé…ç½®

````jsx live=true
// import ChatWebkit from 'chat-webkit'
function App() {
  const sessionList = [
    {
      id: "2",
      message: "å¼€å§‹ä¼šè¯åï¼Œè¿™é‡Œå°±ä¼šæ˜¾ç¤ºç¬¬ä¸€å¥è¯ï¼Œå¦‚æœå¤ªé•¿",
      status: 0,
      question: "1+1=?",
      tools: [
        {
          args: {
            text: "```python\ndef solution():\n    answer = cucl()\n    return answer\n```",
          },
          errmsg: "NameError(\"name 'cucl' is not defined\")",
          result: null,
          state: -10002,
          thought:
            "è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º cucl çš„å‡½æ•°ï¼Œå®ƒè¿”å› 1 + 1 çš„ç»“æœï¼Œå³ 2ã€‚",
          type: "PythonExecutor",
          url: "http://python-executor-service.cloud-dev:8210/inference",
          valid: 0,
        },
        {
          args: {
            text: "```python\ndef solution():\n    def cucl():\n        return 1 + 1\n    answer = cucl()\n    return answer\n```",
          },
          errmsg: "",
          result: {
            text: "2",
          },
          state: 0,
          thought:
            "è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º cucl çš„å‡½æ•°ï¼Œå®ƒè¿”å› 1 + 1 çš„ç»“æœï¼Œå³ 2ã€‚",
          type: "PythonExecutor",
          url: "http://python-executor-service.cloud-dev:8210/inference",
          valid: 0,
        },
      ],
    },
    {
      id: "3",
      message: "å¼€å§‹ä¼šè¯åï¼Œè¿™é‡Œå°±ä¼šæ˜¾ç¤ºç¬¬ä¸€å¥è¯ï¼Œå¦‚æœå¤ªé•¿",
      status: 0,
      question: "æœç´¢ä¸Šæµ·å¤©æ°”",
      tools: [
        {
          args: {
            text: "ä¸Šæµ·å¤©æ°”",
          },
          errmsg: "",
          result: {
            origin: [
              {
                note: "directly return answerBox, thx google !",
                origin: {
                  answer: "85Â°F",
                  title:
                    "Fudan University, 220 Handan Road, Yangpu District, Shanghai, China / Weather",
                },
                summ: "85Â°F",
                title:
                  "Fudan University, 220 Handan Road, Yangpu District, Shanghai, China / Weather",
                type: "answerBox",
                url: "http://www.zgjia.com/jingdian/yangpu_fudandaxue/15tian.html",
              },
            ],
            text: "0.85Â°F",
          },
          state: 0,
          thought: "æˆ‘éœ€è¦ä½¿ç”¨æœç´¢APIæ¥è·å–ä¸Šæµ·å’Œå¤©æ°”çš„ä¿¡æ¯ã€‚",
          type: "Search",
          url: "http://moss-websearch.cloud:7004/inference",
          valid: 0,
        },

      ],
    },
  ];

  return (
    <>
      <div className="chatContainer">
        <ChatWebkit.ChatBox
          userAvatar={<span>TEST USER</span>}
          modelAvatar={<span>LLM</span>}
          isPluginCollpaseed={false}
          apiType={1}
          url=""
          propsSessionList={sessionList}
          requestMessageContainerStyle={{ backgroundColor: "#ffffff" }}
          responseMessageContainerStyle={{
            backgroundColor: "rgba(39,45,230,.1)",
          }}
        />
      </div>
    </>
  );
}
render(App);
````


### å‚æ•°è¯´æ˜

#### ç»„ä»¶å…¥å‚è¯´æ˜

| **å‚æ•°** | **è¯´æ˜** | **æ˜¯å¦å¿…éœ€** | **ç±»å‹** | **é»˜è®¤å€¼** | **ç‰ˆæœ¬** |
| --- | --- | --- | --- | --- | --- |
| apiType | APIç±»å‹é…ç½® InternLMï¼ˆæˆ–è‡ªå®šä¹‰apiï¼‰:1 lmdeploy:2  | æ˜¯ | enum |  |  |
| url | sse è¿æ¥åœ°å€ï¼ˆå¯ä¸ºlmdeploy æˆ– internLM å¯¹è¯è¯·æ±‚apiåœ°å€ï¼Œä¹Ÿå¯ä¸ºè‡ªå®šä¹‰apiï¼Œè‡ªå®šä¹‰apiæ•°æ®è¿”å›æ ¼å¼å‚è€ƒ:SSEè¿”å›çš„æ•°æ®æ ¼å¼è¯´æ˜ï¼‰ï¼Œè‹¥åªæƒ³ç›´æ¥æ¸²æŸ“propsSessionListï¼Œurlå¯å¡«ç©ºå­—ç¬¦ä¸²| æ˜¯ | string |  |  |
| propsSessionList | å†å²å¯¹è¯è®°å½• | å¦ | SseMesage[] |  |  |
| eventName | sse è¿”å›æ•°æ®æ—¶ï¼Œç›‘å¬äº‹ä»¶åç§°ï¼Œé»˜è®¤ä¸º message | å¦ | string |  |  |
| style | å¯¹è¯æ¡†æ ·å¼è‡ªå®šä¹‰ | å¦ | React.CSSProperties |  |  |
| sseMaxWaitTime | SSE è¿æ¥è¶…æ—¶æ—¶é•¿ | å¦ | number |  |  |
| sseNoMessageWaitTime | æ— æ¶ˆæ¯ï¼Œä¼šè¯è¶…æ—¶æ—¶é•¿ | å¦ | number |  |  |
| sseActiveWaitTime | ä¼šè¯ä¸­ï¼ˆå·²æ”¶åˆ°æ¶ˆæ¯ï¼‰ï¼Œè¶…æ—¶æç¤ºç­‰å¾…æ—¶é•¿ | å¦ | number |  |  |
| sseActiveCloseTime | ä¼šè¯ä¸­ï¼ˆå·²æ”¶åˆ°æ¶ˆæ¯ï¼‰ï¼Œè¶…æ—¶ä¸»åŠ¨å…³é—­æ—¶é•¿ | å¦ | number |  |  |
| token | å¤´éƒ¨é‰´æƒä¿¡æ¯ | å¦ | string |  |  |
| requestMessageContainerStyle | æé—®å¯¹è¯æ¡†æ ·å¼è‡ªå®šä¹‰ | å¦ | React.CSSProperties |  |  |
| responseMessageContainerStyle | å›ç­”å¯¹è¯æ¡†æ ·å¼è‡ªå®šä¹‰ | å¦ | React.CSSProperties |  |  |
| isShowStopGenerateButton | æ˜¯å¦æ˜¾ç¤ºåœæ­¢ç”ŸæˆæŒ‰é’® | å¦ | boolean | true |  |
| stopGenerateButtonStyle | åœæ­¢ç”ŸæˆæŒ‰é’®æ ·å¼è‡ªå®šä¹‰ | å¦ | React.CSSProperties |  |  |
| stopGenerateWords | åœæ­¢ç”Ÿæˆæ–‡å­—é…ç½®  | å¦ | string | åœæ­¢ç”Ÿæˆ |  |
| isShowRegenerateButton | å½“ä¼šè¯å¤±è´¥æ—¶ï¼Œ æ˜¯å¦æ˜¾ç¤ºé‡æ–°ç”ŸæˆæŒ‰é’®  | å¦ | boolean | true |  |
| reGenerateComponent | é‡æ–°ç”Ÿæˆç»„ä»¶è‡ªå®šä¹‰ | å¦ | JSX.Element |  |  |
| tooLongErrorComponent | è¶…é•¿æç¤ºç»„ä»¶è‡ªå®šä¹‰ | å¦ | JSX.Element |  |  |
| modelCloseStyle | æ¨¡å‹å…³é—­æ ·å¼è‡ªå®šä¹‰ | å¦ | React.CSSProperties |  |  |
| sseStopCallback | sseä¼šè¯ç»“æŸå›è°ƒ | å¦ | ï¼ˆurl:stringï¼‰=>void |  |  |
| userAvatar | ç”¨æˆ·å¤´åƒè‡ªå®šä¹‰ | å¦ | JSX.Element |  |  |
| modelAvatar | æ¨¡å‹å¤´åƒè‡ªå®šä¹‰ | å¦ | JSX.Element |  |  |
| reviewCallback | äººå·¥å®¡æ ¸å›è°ƒ | å¦ | (id:string,result:number,raw ?:any)=>void |  |  |
| reviewInfoCallback | å®¡æ ¸è¯¦æƒ…ç‚¹å‡»å›è°ƒ | å¦ | (id:string)=>void |  |  |
| reviewTimeingComponent | è‡ªå®šä¹‰å®¡æ ¸è®¡æ—¶å™¨æ’æ§½ | å¦ | JSX.Element |  |  |
| reviewTimoutComponent | è‡ªå®šä¹‰å®¡æ ¸è¶…æ—¶æ’æ§½ | å¦ | JSX.Element |  |  |
| isPluginCollpaseed | æ’ä»¶æ˜¯å¦å±•å¼€ | å¦ | boolean |  |  |
| body | postè¯·æ±‚bodyé…ç½® | å¦ | Body |  |  |


#### Bodyè¯´æ˜

| **å‚æ•°** | **è¯´æ˜** | **æ˜¯å¦å¿…éœ€** | **ç±»å‹** | **é»˜è®¤å€¼** | **ç‰ˆæœ¬** |
| --- | --- | --- | --- | --- | --- |
| session_id | ä¼šè¯id | æ˜¯ | number |  |  |
| interactive_mode | æ˜¯å¦äº¤äº’æ¨¡å¼ | æ˜¯ | boolean |  |  |
| stream | æ˜¯å¦æµå¼è¿”å› | æ˜¯ | boolean |  |  |
| request_output_len | æŒ‡å®šæ¨¡å‹è¾“å‡ºçš„æœŸæœ›é•¿åº¦æˆ–å¤§å° | æ˜¯ | number |  |  |
| top_p | æ§åˆ¶ç”Ÿæˆ token çš„æ¦‚ç‡å¤§å° | æ˜¯ | number |  |  |
| top_k | æ§åˆ¶æ¨¡å‹ç”Ÿæˆå›ç­”æ—¶è€ƒè™‘çš„ä¸Šä¸‹æ–‡å•è¯æ•°é‡çš„å‚æ•° | æ˜¯ | number |  |  |
| temperature | æ¨¡å‹ç”Ÿæˆæ–‡æœ¬æ—¶åˆ›é€ æ€§å’Œå¤šæ ·æ€§çš„è¶…å‚æ•° | æ˜¯ | number |  |  |
| repetition_penalty | æ§åˆ¶æ¨¡å‹ç”Ÿæˆæ–‡æœ¬æ—¶é‡å¤æ€§çš„æ–¹æ³• | æ˜¯ | number |  |  |
| ignore_eos | æ˜¯å¦å¿½ç•¥æˆ–ä¸åœ¨æ„"End of Sequence"ï¼ˆEOSï¼‰æ ‡è®° | æ˜¯ | boolean |  |  |


#### SseMesageæ ¼å¼è¯´æ˜

| **å‚æ•°** | **è¯´æ˜** | **æ˜¯å¦å¿…éœ€** | **ç±»å‹** | **é»˜è®¤å€¼** | **ç‰ˆæœ¬** |
| --- | --- | --- | --- | --- | --- |
| id | èŠå¤©idï¼ˆå”¯ä¸€ï¼‰ | æ˜¯ | number |  |  |
| status | å¯¹è¯çŠ¶æ€| æ˜¯ | AllStatus |  |  |
| message | å¯¹è¯å›å¤ä¿¡æ¯ | æ˜¯ | string |  |  |
| question | å¯¹è¯é—®é¢˜ | æ˜¯ | string |  |  |
| machineAuditResult | æœºå™¨å®¡æ ¸ç»“æœ | å¦ | 0å®¡æ ¸ä¸é€šè¿‡ï¼Œ1å®¡æ ¸é€šè¿‡ï¼Œ2å¾…å®¡æ ¸ |  |  |
| personAuditResult | äººå·¥å®¡æ ¸ç»“æœ | å¦ | 0å®¡æ ¸ä¸é€šè¿‡ï¼Œ1å®¡æ ¸é€šè¿‡ï¼Œ2å¾…å®¡æ ¸ï¼Œ3å®¡æ ¸è¶…æ—¶ |  |  |
| tools | æ’ä»¶å›å¤åˆ—è¡¨ | å¦ | ToolInfo[] |  |  |

#### æ’ä»¶æ•°æ®(ToolInfo)æ ¼å¼è¯´æ˜
| **å‚æ•°** | **è¯´æ˜** | **æ˜¯å¦å¿…éœ€** | **ç±»å‹** | **é»˜è®¤å€¼** | **ç‰ˆæœ¬** |
| --- | --- | --- | --- | --- | --- |
| thought | æ€è€ƒæ­¥éª¤ | æ˜¯ | string | --- | --- |
| type | ç±»å‹ | æ˜¯ | string | --- | --- |
| args | æ‰§è¡Œå†…å®¹ | æ˜¯ | { text:string} | --- | --- |
| errmsg | é”™è¯¯ä¿¡æ¯ | æ˜¯ | string | --- | --- |
| result | æ‰§è¡Œç»“æœ | æ˜¯ | any | --- | --- |
| state | çŠ¶æ€ | æ˜¯ | number | --- | --- |
| valid | æ˜¯å¦æœ‰æ•ˆ | æ˜¯ | number | --- | --- |

#### è‡ªå®šä¹‰API SSEè¿”å›çš„æ•°æ®æ ¼å¼è¯´æ˜

| **å‚æ•°** | **è¯´æ˜** | **æ˜¯å¦å¿…éœ€** | **ç±»å‹** | **é»˜è®¤å€¼** | **ç‰ˆæœ¬** |
| --- | --- | --- | --- | --- | --- |
| code | çŠ¶æ€ç  | æ˜¯ | AllStatus |  |  |
| data | æ•°æ® | æ˜¯ | Data |  |  |

##### AllStatusæ ¼å¼è¯´æ˜

| **æšä¸¾å€¼** | **è¯´æ˜** | **ç‰ˆæœ¬** |
| --- | --- | --- |
| 3 | å‘èµ·è¯·æ±‚5s å†…ï¼Œæ— æ¶ˆæ¯ |  |
| 4 | å‘èµ·è¯·æ±‚5s åï¼Œæ— æ¶ˆæ¯  |  |
| 1 | æ¥æ”¶åˆ°event streamï¼Œæµå¼è¾“å‡ºä¸­ |  |
| -1 | æ¥æ”¶å‡ºé”™ |  |
| 0 | æ¥æ”¶å®Œæˆ |  |
| -20003 | ä¼šè¯è¶…é•¿ |  |
| -20008 | æ¨¡å‹å…³é—­ |  |


##### Dataæ ¼å¼è¯´æ˜

| **å‚æ•°** | **è¯´æ˜** | **æ˜¯å¦å¿…éœ€** | **ç±»å‹** | **é»˜è®¤å€¼** | **ç‰ˆæœ¬** |
| --- | --- | --- | --- | --- | --- |
| **context** |  | å¦ | string |  |  |
| **id** |  | æ˜¯ | number |  |  |
| **request** |  | æ˜¯ | string |  |  |
| **response** |  | æ˜¯ | string |  |  |